<!DOCTYPE html><html lang="es"><head>
	<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
	<title>CampCake – Productos</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="style-productos.css" rel="stylesheet">
	</head><body>
	<header class="py-3 text-center"><h1 class="m-0">Nuestros Productos</h1></header>
	<nav class="navbar navbar-expand-lg navbar-light bg-black_1">
	  <div class="container-fluid justify-content-center">
		<ul class="navbar-nav">
		  <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
		  <li class="nav-item"><a class="nav-link active" href="productos.html">Productos</a></li>
		  <li class="nav-item"><a class="nav-link" href="contacto.html">Pedidos</a></li>
		  <li class="nav-item"><a class="nav-link" href="estadisticas.html">Estadísticas</a></li>
		  <li class="nav-item"><a id="nav-login" class="nav-link" href="auth.html">Acceder</a></li>
		  <li class="nav-item"><a id="nav-perfil" class="nav-link d-none" href="perfil.html">Mi perfil</a></li>
		</ul>
	  </div>
	</nav>
	
	<section class="container my-3 text-center"><h3 class="h5">Materias primas top + toque de arte</h3></section>
	
	<section class="container my-4">
	  <div class="card p-3">
		<div class="row g-2 align-items-end">
		  <div class="col-md-4"><label class="form-label">Buscar</label><input id="q" class="form-control" placeholder="Nombre o descripción"></div>
		  <div class="col-md-3"><label class="form-label">Categoría</label><select id="categoria" class="form-select"><option value="">Todas</option><option>Tortas Cuadradas</option><option>Tortas Circulares</option></select></div>
		  <div class="col-md-2"><label class="form-label">Forma</label><select id="forma" class="form-select"><option value="">Cualquiera</option><option value="cuadrada">Cuadrada</option><option value="circular">Circular</option></select></div>
		  <div class="col-6 col-md-1"><label class="form-label">Mín</label><input id="pmin" type="number" class="form-control" min="0" step="1000"></div>
		  <div class="col-6 col-md-1"><label class="form-label">Máx</label><input id="pmax" type="number" class="form-control" min="0" step="1000"></div>
		  <div class="col-12">
			<label class="me-2"><input id="sinAzucar" type="checkbox" class="form-check-input me-1">Sin azúcar</label>
			<label class="me-2"><input id="sinGluten" type="checkbox" class="form-check-input me-1">Sin gluten</label>
			<label class="me-2"><input id="vegano" type="checkbox" class="form-check-input me-1">Vegano</label>
			<button id="btnFiltrar" class="btn btn-primary btn-sm ms-2">Filtrar</button>
			<button id="btnReset" class="btn btn-outline-secondary btn-sm ms-1">Limpiar</button>
		  </div>
		</div>
	  </div>
	</section>
	
	<section class="container my-4"><div id="grid" class="row g-3"></div></section>
	
	<section class="container my-5">
	  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
		<div class="carousel-indicators">
		  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></button>
		  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></button>
		  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></button>
		</div>
		<div class="carousel-inner">
		  <div class="carousel-item active"><img class="d-block w-100 img-fluid" src="https://www.johaprato.com/files/styles/flexslider_full/public/torta-chocolate-y-frutos-del-bosque.png?itok=JWwdEwyB" alt="Torta de Princesa"><div class="carousel-caption d-none d-md-block"><h5>Torta de Princesa</h5><p>Porciones: 24</p></div></div>
		  <div class="carousel-item"><img class="d-block w-100 img-fluid" src="https://www.dixiecrystals.com/sites/default/files/styles/recipe_image_node_full/public/recipe/M%26M-Cupcakes-dixie.jpg?itok=hA3MVbIW" alt="Cupcakes"><div class="carousel-caption d-none d-md-block"><h5>Cupcakes geniales</h5><p>Porciones: 12</p></div></div>
		  <div class="carousel-item"><img class="d-block w-100 img-fluid" src="https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/delish-200603-toll-house-chocolate-chip-cookies-0003-landscape-ag-1591384336.jpg" alt="Galletas"><div class="carousel-caption d-none d-md-block"><h5>Galletas chips</h5><p>Porciones: a pedido</p></div></div>
		</div>
		<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span><span class="visually-hidden">Anterior</span></button>
		<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"><span class="carousel-control-next-icon"></span><span class="visually-hidden">Siguiente</span></button>
	  </div>
	</section>
	
	<footer class="text-center py-4">&copy; 2022 – Equipo BootCamp</footer>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="Scripts/main.js"></script>
	<script type="module">
	  import { currentUser } from './assets/js/auth.js';
	  import { filterProducts } from './assets/js/search.js';
	  const $=s=>document.querySelector(s), u=currentUser();
	  $('#nav-login').classList.toggle('d-none',!!u); $('#nav-perfil').classList.toggle('d-none',!u);
	
	  let items=[]; const card=p=>`<div class="col-12 col-sm-6 col-lg-4"><article class="card h-100"><div class="card-body"><h3 class="h5">${p.nombre}</h3><p>${p.descripcion||''}</p><p class="fw-bold">$${p.precio}</p><button class="btn btn-outline-primary btn-sm btn-share" data-id="${p.id}">Compartir</button></div></article></div>`;
	  const render=l=>{$('#grid').innerHTML=l.length?l.map(card).join(''):'<p class="text-center">Sin resultados</p>';};
	  const getF=()=>({ q:$('#q').value.toLowerCase().trim(), categoria:$('#categoria').value, forma:$('#forma').value,
		priceMin:$('#pmin').value?+$('#pmin').value:undefined, priceMax:$('#pmax').value?+$('#pmax').value:undefined,
		sinAzucar:$('#sinAzucar').checked, sinGluten:$('#sinGluten').checked, vegano:$('#vegano').checked });
	
	  (async()=>{ items=await (await fetch('./assets/data/products.json')).json(); render(items); })();
	  $('#btnFiltrar').onclick=()=>render(filterProducts(items,getF()));
	  $('#btnReset').onclick=()=>{ ['q','categoria','forma','pmin','pmax','sinAzucar','sinGluten','vegano'].forEach(id=>{const e=document.getElementById(id); e.type==='checkbox'?e.checked=false:e.value=''; }); render(items); };
	  document.addEventListener('click',e=>{ const b=e.target.closest('.btn-share'); if(!b) return; const p=items.find(x=>x.id===b.dataset.id), u=location.origin+location.pathname+'?id='+p.id, m=`Mira esta torta ${p.nombre}: ${u}`; (navigator.share?navigator.share({title:p.nombre,text:m,url:u}):window.open('https://wa.me/?text='+encodeURIComponent(m),'_blank')); });
	</script>
	</body></html>